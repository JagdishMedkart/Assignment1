{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/HP/Assignment1/online-product-management/src/components/CartContext.tsx"],"sourcesContent":["// \"use client\";\r\n\r\n// import React, { createContext, useContext, useState, useEffect } from \"react\";\r\n\r\n// // Define Cart Item Type\r\n// interface CartItem {\r\n//     productId: string;\r\n//     name: string;\r\n//     price: number;\r\n//     quantity: number;\r\n//     image: string;\r\n// }\r\n\r\n// interface CartContextType {\r\n//     cart: CartItem[];\r\n//     addToCart: (item: CartItem) => void;\r\n//     removeFromCart: (productId: string) => void;\r\n//     clearCart: () => void;\r\n// }\r\n\r\n// // Create Cart Context\r\n// const CartContext = createContext<CartContextType | undefined>(undefined);\r\n\r\n// export const useCart = (): CartContextType => {\r\n//     const context = useContext(CartContext);\r\n//     if (!context) {\r\n//         throw new Error(\"useCart must be used within a CartProvider\");\r\n//     }\r\n//     return context;\r\n// };\r\n\r\n// export const CartProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\r\n//     const [cart, setCart] = useState<CartItem[]>([]);\r\n\r\n//     // Load cart from localStorage on initial render\r\n//     useEffect(() => {\r\n//         const storedCart = localStorage.getItem(\"cart\");\r\n//         if (storedCart) {\r\n//             setCart(JSON.parse(storedCart));\r\n//         }\r\n//     }, []);\r\n\r\n//     // Update localStorage whenever cart changes\r\n//     useEffect(() => {\r\n//         localStorage.setItem(\"cart\", JSON.stringify(cart));\r\n//     }, [cart]);\r\n\r\n//     const addToCart = (item: CartItem) => {\r\n//         setCart((prevCart) => {\r\n//             const existingItemIndex = prevCart.findIndex((i) => i.productId === item.productId);\r\n//             let currentQuantity = 0;\r\n//             if (existingItemIndex !== -1) {\r\n//                 currentQuantity = prevCart[existingItemIndex].quantity;\r\n//                 setCart((prevCart) => prevCart.filter((item) => item.productId !== item.productId));\r\n//             }\r\n//             // console.log(existingItemIndex);\r\n//             // console.log(prevCart);\r\n\r\n//             if (existingItemIndex !== -1) {\r\n//                 // If the item already exists, just update the quantity to the exact selected quantity\r\n//                 const updatedCart = [...prevCart];\r\n//                 // console.log(\"qua = \", item.quantity)\r\n//                 // console.log(\"old quantity = \", updatedCart[existingItemIndex].quantity)\r\n//                 updatedCart[existingItemIndex].quantity += item.quantity;\r\n//                 if (updatedCart[existingItemIndex].quantity <= 0) {\r\n//                     updatedCart.splice(existingItemIndex, 1); // Remove if quantity is 0 or less\r\n//                 } // Replace with selected quantity\r\n//                 // console.log(\"new quantity = \", updatedCart[existingItemIndex].quantity)\r\n//                 // console.log(prevCart);\r\n//                 return updatedCart;\r\n//             } else {\r\n//                 // If item does not exist, add it as new\r\n//                 return [...prevCart, item];\r\n//             }\r\n//         });\r\n//     };\r\n\r\n//     const removeFromCart = (productId: string) => {\r\n//         setCart((prevCart) => prevCart.filter((item) => item.productId !== productId));\r\n//     };\r\n\r\n//     const clearCart = () => {\r\n//         setCart([]);\r\n//     };\r\n\r\n//     return (\r\n//         <CartContext.Provider value={{ cart, addToCart, removeFromCart, clearCart }}>\r\n//             {children}\r\n//         </CartContext.Provider>\r\n//     );\r\n// };\r\n\r\n\r\n\"use client\";\r\n\r\nimport React, { createContext, useContext, useState, useEffect } from \"react\";\r\n\r\n// Define Cart Item Type\r\ninterface CartItem {\r\n    productId: string;\r\n    name: string;\r\n    price: number;\r\n    quantity: number;\r\n    image: string;\r\n}\r\n\r\ninterface CartContextType {\r\n    cart: CartItem[];\r\n    addToCart: (item: CartItem) => Promise<void>;\r\n    removeFromCart: (productId: string) => Promise<void>;\r\n    clearCart: () => Promise<void>;\r\n    fetchCart: () => Promise<void>;\r\n}\r\n\r\nconst CartContext = createContext<CartContextType | undefined>(undefined);\r\n\r\nexport const useCart = (): CartContextType => {\r\n    const context = useContext(CartContext);\r\n    if (!context) {\r\n        throw new Error(\"useCart must be used within a CartProvider\");\r\n    }\r\n    return context;\r\n};\r\n\r\nexport const CartProvider: React.FC<{ children: React.ReactNode }> = ({\r\n    children,\r\n}) => {\r\n    const [cart, setCart] = useState<CartItem[]>([]);\r\n\r\n    // Fetch the cart from the database\r\n    const fetchCart = async () => {\r\n        try {\r\n            const response = await fetch(\"/api/cart/index\");\r\n            if (!response.ok) throw new Error(\"Failed to fetch cart.\");\r\n            const data = await response.json();\r\n            setCart(data.cart || []);\r\n        } catch (error) {\r\n            console.error(\"Error fetching cart:\", error);\r\n        }\r\n    };\r\n\r\n    // Add item to the cart\r\n    const addToCart = async (item: CartItem) => {\r\n        try {\r\n            const response = await fetch(\"/api/cart/add\", {\r\n                method: \"POST\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify(item),\r\n            });\r\n            console.log(response);\r\n            if (!response.ok) throw new Error(\"Failed to add item to cart.\");\r\n            await fetchCart(); // Refresh cart\r\n        } catch (error) {\r\n            if (error instanceof Error) {\r\n                console.log(error.stack);\r\n            }\r\n            console.error(\"Error adding item to cart:\", error);\r\n        }\r\n    };\r\n\r\n    // Remove item from the cart\r\n    const removeFromCart = async (id: string, userId: string) => {\r\n        try {\r\n            const response = await fetch(`/api/cart/remove/${id}/${userId}`, {\r\n                method: \"DELETE\",\r\n            });\r\n            if (!response.ok) throw new Error(\"Failed to remove item from cart.\");\r\n            await fetchCart(); // Refresh cart\r\n        } catch (error) {\r\n            console.error(\"Error removing item from cart:\", error);\r\n        }\r\n    };\r\n\r\n    // Clear the cart\r\n    const clearCart = async () => {\r\n        try {\r\n            const response = await fetch(\"/api/cart/clear\", { method: \"DELETE\" });\r\n            if (!response.ok) throw new Error(\"Failed to clear cart.\");\r\n            setCart([]); // Clear local state\r\n        } catch (error) {\r\n            console.error(\"Error clearing cart:\", error);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchCart(); // Fetch cart on initialization\r\n    }, []);\r\n\r\n    return (\r\n        <CartContext.Provider\r\n            value={{ cart, addToCart, removeFromCart, clearCart, fetchCart }}\r\n        >\r\n            {children}\r\n        </CartContext.Provider>\r\n    );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 185, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 195, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/HP/Assignment1/online-product-management/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n    } else if (process.env.TURBOPACK) {\n      module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n    } else {\n      module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n    } else if (process.env.TURBOPACK) {\n      module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n    } else {\n      module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":";AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,MAAQ;;AAEzC,OAAO;IACL,IAAIF,QAAQC,GAAG,CAACK,uBAA2B,EAAF;;IAQzC,OAAO;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1CJ,OAAOC,OAAO,GAAGC,QAAQ;QAC3B,OAAO,IAAIL,QAAQC,GAAG,CAACO,SAAS,EAAE;;QAIlC;IACF;AACF","ignoreList":[0]}},
    {"offset": {"line": 209, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 214, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/HP/Assignment1/online-product-management/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = require('../../module.compiled').vendored[\n  'react-ssr'\n].ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":";AAAAA,OAAOC,OAAO,GAAGC,QAAQ,0HAAyBC,QAAQ,CACxD,YACD,CAACC,kBAAkB","ignoreList":[0]}},
    {"offset": {"line": 216, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 221, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/HP/Assignment1/online-product-management/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = require('../../module.compiled').vendored['react-ssr'].React\n"],"names":["module","exports","require","vendored","React"],"mappings":";AAAAA,OAAOC,OAAO,GAAGC,QAAQ,0HAAyBC,QAAQ,CAAC,YAAY,CAACC,KAAK","ignoreList":[0]}},
    {"offset": {"line": 223, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}